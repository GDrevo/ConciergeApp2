<div class="appointment-container">
  <h1>Make a Booking</h1>
  <h3>Fill out the form below to book one of our services</h3>
  <div class="appointment-form" data-controller='cleanersappointments time-and-price-estimations'>

    <%= simple_form_for @appointment, data: { controller: 'flatpickr end-date-calculation' } do |f| %>

      <%= f.input :rooms, collection: [1, 2, 3, 4, 5, 6], as: :radio_buttons, input_html: { data: { time_and_price_estimations_target: "rooms", action: "change->time-and-price-estimations#updateTime" } }, checked: 1 %>

      <%= f.input :service, collection: ["Basic", "Medium", "Premium"], as: :radio_buttons, input_html: { data: { time_and_price_estimations_target: "service", action: "change->time-and-price-estimations#updateTime" } }, checked: "Basic" %>

      <%= f.input :start_time, as: :string, input_html: { data: { flatpickr_target: "startTime", cleanersappointments_target: "startDate", end_date_calculation_target: "startTime", action: "change->cleanersappointments#updateCleaners change->end-date-calculation#updateEndTime" } } %>

      <%= f.input :end_time, as: :string, input_html: { data: { flatpickr_target: "endTime", cleanersappointments_target: "endDate", end_date_calculation_target: "endTime", action: "change->cleanersappointments#updateCleaners" }, id: 'end_time' } %>

      <%= f.input :estimated_time, collection: [""], input_html: { hidden: "hidden" , data: { time_and_price_estimations_target: "estimatedTime" } } %>

      <div class="time-estimation">
        <h5 data-time-and-price-estimations-target="duration" data-end-date-calculation-target="duration"></h5>
      </div>

      <%= f.input :price, collection: [""], input_html: { hidden: "hidden" , data: { time_and_price_estimations_target: "estimatedPrice" } } %>

      <div class="price-estimation">
        <h5 data-time-and-price-estimations-target="price"></h5>
      </div>

      <%= f.input :cleaner_id, collection: [""], input_html: { data: { cleanersappointments_target: "cleanerList", action: "change->cleanersappointments#updateSelectedCleaner" } }, label: "Enter dates to choose a cleaner" %>

      <div class="selected-cleaner-container" data-cleanersappointments-target="selectedCleaner">

      </div>

      <%= f.submit 'Schedule your appointment' %>

    <% end %>
  </div>
</div>
